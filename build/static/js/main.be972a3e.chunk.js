(this["webpackJsonpblog-cms"]=this["webpackJsonpblog-cms"]||[]).push([[0],{152:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),s=n(28),o=n(10),l=n(14),u=n(8),d=n.n(u),b=n(16),h=n(58),j=n(41),p=n(23),f=n(2),g=function(e){var t=e.setUserAuth,n=Object(h.a)(),r=n.register,c=n.handleSubmit,i=n.errors,s=Object(a.useState)(!1),l=Object(o.a)(s,2),u=l[0],g=l[1],O=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(n),console.log(a),e.prev=2,e.next=5,fetch("https://real-blog-backend.herokuapp.com/login",{method:"POST",body:a,headers:{Accept:"application/json","Content-Type":"application/json"}});case 5:return r=e.sent,e.next=8,r.json();case 8:if(c=e.sent,200===r.status){e.next=12;break}return g(!0),e.abrupt("return");case 12:console.log("json response",c),localStorage.setItem("currentUsername",c.user.username),localStorage.setItem("currentDisplayName",c.user.display_name),localStorage.setItem("token",c.token),localStorage.setItem("userAuth",!0),t(!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),g(!0);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(p.a,{className:"layout",children:[Object(f.jsx)("h3",{children:"Login"}),Object(f.jsxs)(p.a.Group,{children:[Object(f.jsx)(p.a.Label,{htmlFor:"author_name",children:"User:"}),Object(f.jsx)(p.a.Control,{autoComplete:"username",name:"username",type:"text",placeholder:"Name",ref:r({required:"required field"})}),i.username&&Object(f.jsx)(p.a.Text,{children:i.username.message})]}),Object(f.jsxs)(p.a.Group,{children:[Object(f.jsx)(p.a.Label,{htmlFor:"password",placeholder:"password",children:"Password:"}),Object(f.jsx)(p.a.Control,{autoComplete:"current-password",name:"password",type:"password",ref:r({required:"required field"})}),i.password&&Object(f.jsxs)(p.a.Text,{children:[i.password.message," "]})]}),u&&Object(f.jsx)(p.a.Text,{children:"Username or password incorrect"}),Object(f.jsx)(j.a,{type:"submit",onClick:c(O),children:"Login"})]})},O=(n(83),n(36)),m=n(37),x=n(39),v=n(38),y=n(306),k=n(305),S=n(304),C=n(302),A=n(303),N=n(301),T=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleAgree=function(){console.log("I agree!");var t=localStorage.getItem("token"),n="Bearer ".concat(t);try{fetch("https://real-blog-backend.herokuapp.com/"+"posts/".concat(e.props.deleteid),{method:"delete",headers:{Authorization:n,"Content-Type":"application/json"}}).then((function(){e.props.history.push("/posts"),window.location.reload()})).catch((function(e){console.log(e)}))}catch(a){console.error(a)}e.handleClose()},e.handleDisagree=function(){console.log("I will not delete. I will not do anything. Save yourself."),e.handleClose()},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{deleteid:this.props.deleteid,style:{display:"flex",justifyContent:"center"},children:[Object(f.jsx)(y.a,{onClick:this.handleClickOpen,children:"Delete"}),Object(f.jsxs)(k.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(N.a,{id:"alert-dialog-title",children:"Successful Alert"}),Object(f.jsx)(C.a,{children:Object(f.jsx)(A.a,{id:"alert-dialog-description",children:"Do you really want to delete this post?"})}),Object(f.jsxs)(S.a,{children:[Object(f.jsx)(y.a,{onClick:this.handleDisagree,color:"primary",children:"No"}),Object(f.jsx)(y.a,{onClick:this.handleAgree,color:"primary",autoFocus:!0,children:"Yes"})]})]})]})}}]),n}(r.a.Component),w=Object(l.o)(T),D=(n(103).DateTime,n(11)),_=(n(152),n(103).DateTime),F={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},I=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.a.useState(t),a=Object(o.a)(n,2),c=a[0],i=a[1];return{items:r.a.useMemo((function(){var t=Object(D.a)(e);return null!==c&&t.sort((function(e,t){return e[c.key]<t[c.key]?"ascending"===c.direction?-1:1:e[c.key]>t[c.key]?"ascending"===c.direction?1:-1:0})),t}),[e,c]),requestSort:function(e){var t="ascending";c&&c.key===e&&"ascending"===c.direction&&(t="descending"),i({key:e,direction:t})},sortConfig:c}}(e.posts),n=t.items,a=t.requestSort,c=t.sortConfig,i=function(e){if(c)return c.key===e?c.direction:void 0};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h4",{children:"Post Listing"}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return a("title")},className:i("title"),children:"Title"})}),Object(f.jsx)("th",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return a("author_name")},className:i("author_name"),children:"Author"})}),Object(f.jsx)("th",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return a("date_created")},className:i("date_created"),children:"Date Created"})}),Object(f.jsx)("th",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return a("date_modified")},className:i("date_modified"),children:"Date Modified"})}),Object(f.jsx)("th",{children:Object(f.jsx)("button",{type:"button",onClick:function(){return a("published")},className:i("published")+" reversed",children:"Draft"})}),Object(f.jsx)("th",{}),Object(f.jsx)("th",{}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:n.map((function(e){return Object(f.jsxs)("tr",{className:e.published?"notDraft":"isDraft",children:[Object(f.jsxs)("td",{children:[e.title,e.published?"":" (Draft)"]}),Object(f.jsx)("td",{children:e.author_name}),Object(f.jsx)("td",{children:_.fromISO(e.date_created).toLocaleString(F)}),Object(f.jsx)("td",{children:_.fromISO(e.date_modified).toLocaleString(F)}),Object(f.jsx)("td",{children:e.published?"No":"Yes"}),Object(f.jsx)("td",{children:e.published?Object(f.jsx)(y.a,{children:Object(f.jsx)("a",{target:"_blank",href:"".concat("https://real-blog-frontend-public-code.vercel.app/","posts/").concat(e._id),children:"View Live"})}):""}),Object(f.jsx)("td",{children:Object(f.jsx)(y.a,{children:Object(f.jsx)("a",{href:"/#/posts/".concat(e._id),children:"Edit"})})}),Object(f.jsx)("td",{children:Object(f.jsx)(w,{deleteid:e._id})})]},e._id)}))})]})]})},q=n(18),E=n.n(q),L=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("token"),t="Bearer ".concat(e);(function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E.a.get("https://real-blog-backend.herokuapp.com/allposts",{headers:{Authorization:t}}).then((function(e){r(e.data.posts)})).catch((function(e){console.log(e)}))}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(n),n?Object(f.jsx)(I,{posts:n}):Object(f.jsx)("div",{children:"Loading..."})},R=n(25),P=n(51),H=n(29),M=n(40),V=n.n(M),Q=(n(274),!!navigator.userAgent.match(/Trident/i)),U="https://real-blog-backend.herokuapp.com/uploadfiles",B=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getMetaTagElements=function(e){var t=document.createElement("div");return t.innerHTML=e,t.getElementsByTagName("meta")},e}return Object(m.a)(n,[{key:"onPaste",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var a,r,c,i=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clipboardData||window.clipboardData,e.next=3,a.getData("Text");case 3:r=e.sent,(c=r.match(/\b(http|https)?:\/\/\S+/gi)||[]).length>0?(t.preventDefault(),c.forEach((function(e){E.a.get(e).then((function(e){var t,n,a,r,c=Object(R.a)(i.getMetaTagElements(e));try{for(c.s();!(r=c.n()).done;){var s=r.value;"og:title"===s.getAttribute("property")&&(t=s.getAttribute("content")),"og:image"===s.getAttribute("property")&&(n=s.getAttribute("content")),"og:url"===s.getAttribute("property")&&(a=s.getAttribute("content"))}}catch(d){c.e(d)}finally{c.f()}var o="<a href=".concat(a,' target="_blank"><div><img src=').concat(n," alt=").concat(t,' width="20%"/><span>').concat(t,"</span></div></a>"),l=i.quill.getSelection(),u=l?l.index:0;i.quill.pasteHTML(u,o,"silent"),i.quill.setSelection(u+o.length)})).catch((function(e){return console.error(e)}))}))):Object(P.a)(Object(H.a)(n.prototype),"onPaste",this).call(this,t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(M.Quill.import("modules/clipboard"));M.Quill.register("modules/clipboard",B,!0);var z=M.Quill.import("blots/block/embed"),J=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,null,[{key:"create",value:function(e){var t=Object(P.a)(Object(H.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("alt",e.alt),t.setAttribute("width","100%"),t}},{key:"value",value:function(e){return{src:e.getAttribute("src"),alt:e.getAttribute("alt")}}}]),n}(z);J.blotName="image",J.tagName="img",M.Quill.register(J);var Y=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,null,[{key:"create",value:function(e){if(e&&e.src){var t=Object(P.a)(Object(H.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("title",e.title),t.setAttribute("width","100%"),t.setAttribute("controls",""),t}var a=document.createElement("iframe");return a.setAttribute("src",e),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("width","100%"),a}},{key:"value",value:function(e){return e.getAttribute("title")?{src:e.getAttribute("src"),alt:e.getAttribute("title")}:e.getAttribute("src")}}]),n}(z);Y.blotName="video",Y.tagName="video",M.Quill.register(Y);var G=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="Attachments - ";var a=document.createElement("b");a.innerText=e;var r=document.createElement("a");r.setAttribute("href","https://real-blog-backend.herokuapp.com/uploads/"+e),r.setAttribute("target","_blank"),r.setAttribute("className","file-link-inner-post"),r.appendChild(a);var c=Object(P.a)(Object(H.a)(n),"create",this).call(this);return c.appendChild(t),c.appendChild(r),c}},{key:"value",value:function(e){return e.querySelector("a").getAttribute("href")}}]),n}(z);G.blotName="file",G.tagName="p",G.className="file-inner-post",M.Quill.register(G);var W=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ud22c\ud45c - ";var a=document.createElement("b");a.innerText=e.title;var r=Object(P.a)(Object(H.a)(n),"create",this).call(this);return r.setAttribute("id",e.id),r.appendChild(t),r.appendChild(a),r}},{key:"value",value:function(e){return{id:e.getAttribute("id"),title:e.querySelector("b").innerText}}}]),n}(z);W.blotName="poll",W.tagName="p",W.className="poll-inner-post",M.Quill.register(W);var X=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).handleChange=function(e){console.log("html",e),a.setState({editorHtml:e},(function(){a.props.onEditorChange(a.state.editorHtml)}))},a.imageHandler=function(){a.inputOpenImageRef.current.click()},a.videoHandler=function(){a.inputOpenVideoRef.current.click()},a.fileHandler=function(){a.inputOpenFileRef.current.click()},a.insertImage=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),E.a.post(U,n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload image file");var n=a.reactQuillRef.getEditor();n.focus();var r=n.getSelection(),c=r?r.index:0;console.log("The response data url",e.data.url),n.insertEmbed(c,"image",{src:"https://real-blog-backend.herokuapp.com/"+e.data.url,alt:e.data.fileName}),n.setSelection(c+1),a._isMounted&&a.setState({files:[].concat(Object(D.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.insertVideo=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),E.a.post(U,n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var n=a.reactQuillRef.getEditor();n.focus();var r=n.getSelection(),c=r?r.index:0;n.insertEmbed(c,"video",{src:"https://real-blog-backend.herokuapp.com/"+e.data.url,title:e.data.fileName}),n.setSelection(c+1),a._isMounted&&a.setState({files:[].concat(Object(D.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.insertFile=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];console.log(t);var n=new FormData;n.append("file",t),E.a.post(U,n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var n=a.reactQuillRef.getEditor();n.focus();var r=n.getSelection(),c=r?r.index:0;n.insertEmbed(c,"file",e.data.fileName),n.setSelection(c+1),a._isMounted&&a.setState({files:[].concat(Object(D.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}}))}},a.modules={syntax:!1,toolbar:{container:"#toolbar",handlers:{insertImage:a.imageHandler,insertVideo:a.videoHandler,insertFile:a.fileHandler,insertPoll:a.pollHandler}}},a.formats=["header","bold","italic","underline","strike","image","video","file","link","code-block","video","blockquote","clean"],console.log(e),a.state={editorHtml:Q?"<p>&nbsp;</p>":"",files:[]},a.reactQuillRef=null,a.inputOpenImageRef=r.a.createRef(),a.inputOpenVideoRef=r.a.createRef(),a.inputOpenFileRef=r.a.createRef(),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;if(this._isMounted=!0,this.props.fetchid){e=this.props.fetchid,E.a.get("https://real-blog-backend.herokuapp.com/"+"posts/".concat(e)).then((function(e){200==e.status?t.setState({editorHtml:e.data.post.text}):alert("Couldn`t get blog")}))}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{id:"toolbar",children:[Object(f.jsxs)("select",{className:"ql-header",defaultValue:"",onChange:function(e){return e.persist()},children:[Object(f.jsx)("option",{value:"1"}),Object(f.jsx)("option",{value:"2c"}),Object(f.jsx)("option",{value:""})]}),Object(f.jsx)("button",{className:"ql-bold"}),Object(f.jsx)("button",{className:"ql-italic"}),Object(f.jsx)("button",{className:"ql-underline"}),Object(f.jsx)("button",{className:"ql-strike"}),Object(f.jsx)("button",{className:"ql-insertImage",children:"I"}),Object(f.jsx)("button",{className:"ql-insertVideo",children:"V"}),Object(f.jsx)("button",{className:"ql-insertFile",children:"F"}),Object(f.jsx)("button",{className:"ql-link"}),Object(f.jsx)("button",{className:"ql-code-block"}),Object(f.jsx)("button",{className:"ql-video"}),Object(f.jsx)("button",{className:"ql-blockquote"}),Object(f.jsx)("button",{className:"ql-clean"})]}),Object(f.jsx)(V.a,{ref:function(t){e.reactQuillRef=t},theme:"snow",onChange:this.handleChange,modules:this.modules,formats:this.formats,value:this.state.editorHtml,placeholder:this.props.placeholder,initialiser:this.props.initialiser,fetchid:this.props.fetchid}),Object(f.jsx)("input",{type:"file",accept:"image/*",ref:this.inputOpenImageRef,style:{display:"none"},onChange:this.insertImage}),Object(f.jsx)("input",{type:"file",accept:"video/*",ref:this.inputOpenVideoRef,style:{display:"none"},onChange:this.insertVideo}),Object(f.jsx)("input",{type:"file",accept:"*",ref:this.inputOpenFileRef,style:{display:"none"},onChange:this.insertFile})]})}}]),n}(r.a.Component),K=function(e){var t=e.preloadedValues,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(t.posttitle),u=Object(o.a)(s,2),d=u[0],b=u[1],j=Object(a.useState)(null),p=Object(o.a)(j,2),g=p[0],O=p[1],m=Object(a.useState)(t.published),x=Object(o.a)(m,2),v=x[0],k=x[1],S=Object(l.m)().id;console.log("The preloaded values are",t),console.log("The data to be posted is",c,d,v);var C=Object(h.a)({defaultValues:t}),A=C.register,N=(C.handleSubmit,Object(l.k)());console.log("Id has been set?",S);return Object(f.jsx)("div",{className:"layout",children:Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"My Title"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{ref:A,placeholder:"My Title",name:"posttitle",onChange:function(e){console.log(e.target.value),b(e.target.value)},fontSize:"2em",type:"text"})," ",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Publish to the web"}),Object(f.jsx)("input",{ref:A,checked:v,name:"published",className:"mycheckbox",type:"checkbox",onChange:function(e){console.log(e.currentTarget.checked),k(e.currentTarget.checked)}})]}),Object(f.jsxs)("div",{children:["Choose a new cover image: ",Object(f.jsx)("input",{type:"file",onChange:function(e){console.log(e.currentTarget.files[0]),O(e.currentTarget.files[0])}})]}),Object(f.jsx)("br",{}),Object(f.jsx)(X,{placeholder:"Start Posting Something",modules:{toolbar:[["bold","italic"],["link","image"]]},onEditorChange:function(e){i(e)},onFilesChange:function(e){},fetchid:S}),Object(f.jsx)("div",{style:{textAlign:"center",margin:"2rem"},children:Object(f.jsx)(y.a,{onClick:function(e){console.log("submitting...."),e.preventDefault();var t=function(e){var t=localStorage.getItem("currentUsername"),n=localStorage.getItem("token"),a="Bearer ".concat(n),r=e?JSON.stringify({title:d,text:c,author_name:t,published:v,cover_image_url:e}):JSON.stringify({title:d,text:c,author_name:t,published:v});try{fetch("https://real-blog-backend.herokuapp.com/"+"posts/".concat(S),{method:"PUT",body:r,headers:{Authorization:a,"Content-Type":"application/json"}}).then((function(e){200==e.status?(i(""),b(""),N.push("/posts")):alert("Failed to upload, please try again!")})).catch((function(e){console.log(e)}))}catch(s){console.log(s)}};if(g){var n=new FormData;n.append("file",g);E.a.post("https://real-blog-backend.herokuapp.com/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){e.data.success?t(e.data.url):t("uploads/default.webp")})).catch((function(e){t("uploads/default.webp")}))}else t(!1)},color:"primary",children:"Save Post"})}),Object(f.jsx)("div",{style:{textAlign:"center",margin:"2rem"},children:Object(f.jsx)(w,{deleteid:S})})]})})};var Z=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(l.m)().id;return Object(a.useEffect)((function(){E.a.get("https://real-blog-backend.herokuapp.com/"+"posts/".concat(c)).then((function(e){200==e.status?r({posttitle:e.data.post.title,published:e.data.post.published}):alert("Couldn`t get post data")}))}),[]),n?Object(f.jsx)(K,{preloadedValues:n}):Object(f.jsx)("div",{children:"Loading..."})},$=Object(l.o)((function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),r=Object(o.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),u=Object(o.a)(s,2),h=u[0],j=u[1],p=Object(a.useState)(null),g=Object(o.a)(p,2),O=g[0],m=g[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),y=v[0],k=v[1],S=Object(l.k)();Object(a.useEffect)((function(){console.log(y)}));return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("currentDisplayName"),a=localStorage.getItem("token"),r="Bearer ".concat(a),s=JSON.stringify({title:h,text:c,author_name:n,published:y,cover_image_url:t||""}),e.prev=4,e.next=7,fetch("https://real-blog-backend.herokuapp.com/posts/",{method:"post",body:s,headers:{Authorization:r,"Content-Type":"application/json"}}).then((function(e){console.log(e),200===e.status?(i(""),j(""),S.push("/posts")):alert("Failed to upload, please try again!")})).catch((function(e){console.log(e)}));case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),n=new FormData;n.append("file",O);E.a.post("https://real-blog-backend.herokuapp.com/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){console.log("something something"),e.data.success?(console.log("Image has been sent to the server. Now sending post data."),t(e.data.url)):t("uploads/default.webp")})).catch((function(e){console.log(e),t("uploads/default.webp")}))},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"My Title"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{fontSize:"2em",type:"text",placeholder:"Title",value:h,onChange:function(e){return j(e.target.value)}})," ",Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Publish to the web"}),Object(f.jsx)("input",{className:"mycheckbox",type:"checkbox",onChange:function(e){console.log(e.currentTarget.checked),k(e.currentTarget.checked)}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"Add in a cover image (Recommended size: X by Y)"}),Object(f.jsx)("input",{type:"file",onChange:function(e){console.log(e.currentTarget.files[0]),m(e.currentTarget.files[0])}})]}),Object(f.jsx)(X,{placeholder:"Start Posting Something",modules:{toolbar:[["bold","italic"],["link","image"]]},onEditorChange:function(e){i(e)},onFilesChange:function(e){}}),Object(f.jsx)("div",{style:{textAlign:"center",margin:"2rem"},children:Object(f.jsx)("button",{size:"large",htmltype:"submit",className:"",children:"Submit"})})]})})})),ee=n(99),te=n(82),ne=n(98),ae=function(e){var t=e.userAuth,n=e.setUserAuth;return Object(f.jsxs)(ee.a,{children:[Object(f.jsxs)(ee.a.Brand,{children:[" ",Object(f.jsx)("h1",{children:"My Blog"})]}),Object(f.jsxs)(te.a,{className:"mr-auto",children:[Object(f.jsx)(ne.LinkContainer,{to:"/posts",children:Object(f.jsx)(te.a.Link,{children:"Home"})}),Object(f.jsx)(ne.LinkContainer,{to:"/newpost",children:Object(f.jsx)(te.a.Link,{children:"New Post"})})]}),t&&Object(f.jsx)(j.a,{variant:"outline-success",onClick:function(){n(!1),localStorage.clear()},children:"Logout"})]})},re=n(133),ce=n(72),ie=n(134);var se=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("userAuth");r(!!e)}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(re.a,{children:Object(f.jsx)(ie.a,{children:Object(f.jsxs)(ce.a,{children:[" ",Object(f.jsx)(ae,{userAuth:n,setUserAuth:r,className:"Nav"}),Object(f.jsxs)(l.g,{children:[" ",Object(f.jsx)(l.d,{exact:!0,path:"/",children:Object(f.jsx)(l.c,{to:"/posts"})}),Object(f.jsx)(l.d,{exact:!0,path:"/posts",children:n?Object(f.jsx)(L,{}):Object(f.jsx)(g,{setUserAuth:r})}),Object(f.jsx)(l.d,{exact:!0,path:"/posts/:id",children:n?Object(f.jsx)(Z,{}):Object(f.jsx)(g,{setUserAuth:r})}),Object(f.jsx)(l.d,{path:"/newpost",children:n?Object(f.jsx)($,{}):Object(f.jsx)(g,{setUserAuth:r})}),Object(f.jsx)(l.d,{path:"/",children:Object(f.jsx)("p",{children:"404"})})]})]})})})})},oe=(n(276),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,308)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))});i.a.render(Object(f.jsx)(s.HashRouter,{basename:"/",children:Object(f.jsx)(se,{})}),document.getElementById("root")),oe()}},[[277,1,2]]]);
//# sourceMappingURL=main.be972a3e.chunk.js.map